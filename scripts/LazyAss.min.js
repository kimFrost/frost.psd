!function(a,b){var c=function(a,b,c){var d;return function(){function e(){c||a.apply(f,g),d=null}var f=this,g=arguments;d?clearTimeout(d):c&&a.apply(f,g),d=setTimeout(e,b||100)}};jQuery.fn[b]=function(a){return a?this.bind("resize",c(a)):this.trigger(b)}}(jQuery,"smartresize");var LazyAss=new namespace("LazyAss");LazyAss.Angular=angular.module("LazyAss",[]).config(function(){console.log("Config Module")}).run(function(){console.log("Run Module")});var LazyAss=new namespace("LazyAss");LazyAss.Angular.directive("lLazyAss",["$http",function(a){return{restrict:"C",scope:{},priority:1e3,controller:["$scope","$element","$attrs",function(b){console.log("------------------------------------------------------------------"),console.log("------------------------- HUB Controller -------------------------"),console.log("------------------------------------------------------------------"),b.data={psdList:[],overlay:{metric:{left:0,top:0,width:0,height:0}},analyse:{fonts:[],colors:[],fontSizes:[],loading:!1,snapshot:{img:"",loading:!1}}},b.reloadPsdList=function(){a.get("/api/getPsdList").then(function(a){if(null!=a.data){b.data.psdList=[];for(var c=0;c<a.data.length;c++){var d=a.data[c];b.data.psdList.push({title:d})}}})},b.loadPsd=function(c){b.resetData(),console.log("/api/getPsdData/:"+c),b.data.analyse.snapshot.loading=!0,b.data.analyse.loading=!0,a.get("/api/getPsdPng/:"+c).then(function(a){if(b.data.analyse.snapshot.loading=!1,null!=a.data&&void 0!=a.data){var c=a.data;c=c.replace("\\r","").replace("\\n","").replace(/["']/g,""),b.data.analyse.snapshot.img=c}}),a.get("/api/getPsdData/:"+c).then(function(a){if(b.data.analyse.loading=!1,null!=a.data&&void 0!=a.data){var c=$.parseJSON(a.data),d=JSON.parse(JSON.stringify(c));console.log("jsonObj"),console.log(d),b.processData(d)}})},b.resetData=function(){b.data.analyse={fonts:[],colors:[],fontSizes:[],loading:!1,snapshot:{img:"/",loading:!1}}},b.processData=function(a){null!=a&&void 0!=a&&0!=a.visible&&(void 0!=a.text&&void 0!=a.text.font&&b.pushFont(a.text,a),void 0!=a.children&&a.children.length>0&&$.each(a.children,function(){b.processData(this)}))},b.pushColor=function(a){b.data.analyse.colors.push(a)},b.pushFontSize=function(a){b.data.analyse.fontSizes.push(a)},b.pushFont=function(a,c){dataFont=a.font;var d=dataFont.name,e=dataFont.css,f=dataFont.colors,g=dataFont.sizes,h=a.value,i={top:c.top,left:c.left,width:c.width,height:c.height};$.isArray(d)||(d=d.replace(/ /,""),d=[d]);for(var j=e.split(";"),k=0;k<j.length;k++){var l=j[k];if(-1!=l.indexOf("font-family")){l=l.replace("font-family:","");for(var m=l.split(","),n=0;n<m.length;n++){var o=m[n];if(o=o.replace(/ /,""),"AdobeInvisFont"===o)break;-1==$.inArray(o,d)&&d.push(o)}}}$.each(f,function(){var a=this;b.pushColor(a)}),$.each(g,function(){var a=this;b.pushFontSize(parseFloat(a))}),b.data.analyse.fonts.push({fonts:d,colors:f,css:e,fontSizes:g,value:h,metric:i})},b.showOverlay=function(a,c,d,e){console.log("showOverlay"),b.data.analyse.snapshot.loading||b.data.analyse.loading||(console.log(a,c,d,e),b.data.overlay.metric.left=a,b.data.overlay.metric.top=c,b.data.overlay.metric.width=d,b.data.overlay.metric.height=e)},b.hideOverlay=function(){},this.loadPsd=function(){console.log("controller load psd")}}],compile:function(){return{pre:function(){console.log("------------------------------------------------------------------"),console.log("---------------------- HUB Pre CompileLink  ----------------------"),console.log("------------------------------------------------------------------")},post:function(){console.log("------------------------------------------------------------------"),console.log("---------------------- HUB Post CompileLink ----------------------"),console.log("------------------------------------------------------------------")}}}}}]);